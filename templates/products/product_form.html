{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Product</title>
    <link rel="stylesheet" href="{% static '/css/main.css' %}">
    <link rel="stylesheet" href="{% static '/css/navbar.css' %}">
    <link rel="stylesheet" href="{% static '/css/products.css' %}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">

    <!-- FONT AWESOME KIT -->
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

    <!-- JQUERY < 3.0.0 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <form id="product-form" action="" method="POST">
    <div class="product-header-container">
        <div class="product-header-wrapper">
            <div class="product-header-content">
                <h3 class="bold">Add Product</h1>
            </div>
            <div class="product-header-btns">   
                <button class="secondary-btn">
                    <a href="{% url 'products:products' %}" class="secondary-btn-link">Cancel</a>
                </button>
                <button class="primary-btn" id="preview-btn">
                    <input type="submit" name="Submit" value="Preview Product" id="submitBtn" class="preview-btn">
                </button>
            </div>
        </div>
    </div>
    
    {% include 'quicklink/navbar.html' %}

    <main>
        <div class="product-form-container">
            <div class="product-form-wrapper">
                <div class="product-form-back">
                    <a href="{% url 'products:products' %}" class="subtitle">
                        <i class="fas fa-chevron-left"></i>
                        Back to Products
                    </a>
                </div>
        
                <h2 class="bold" style="color: #FF8A00;">Add a new product</h2>
                
                {% csrf_token %}
                
                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Name</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    {{ form.name }}
                </div>

                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Description</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    {{ form.description }}
                </div>

                <div class="product-form-images">
                    {{ form.image }}
                </div>

                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Available Sizes or Servings</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    {{ sizeFormset.management_form }}

                    <!-- The form-TOTAL_FORMS input contains the value of the total number of forms being submitted. If it doesn't match the actual number of forms Django receives when the forms are submitted, an error will be raised. -->
                    <input type="hidden" name="sizeForm-TOTAL_FORMS" value="1" id="sizeForm-TOTAL_SIZES">
                    <input type="hidden" name="sizeForm-MIN_NUM_FORMS" value="1" id="sizeForm-MIN_NUM_SIZES">
                    <input type="hidden" name="sizeForm-MAX_NUM_FORMS" value="10" id="sizeForm-MAX_NUM_SIZES">
                    
                    {% for size in sizeFormset %}    
                    <div class="product-form-formset size-formset">
                        {{ size }}
                        <button type="button" name="id_size-set-0-remove" id="id_size-set-0-remove" class="tertiary-btn tertiary-btn-link delete-size-form">Remove</button>
                    </div>
                    {% endfor %}
                    <button type="button" id="add-size" class="tertiary-btn tertiary-btn-link bold">Add Option</button>
                </div>

                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Stocks</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    <div class="product-form-stocks">
                        <div class="radio-select-row">
                            <input type="radio" name="made-to-order" id="made-to-order" checked> 
                            <label for="made-to-order" class="radio-label subtitle">Made to Order</label>
                        </div>
                        <div class="radio-select-row">
                            <input type="radio" name="stocks-input-select" id="stocks-input-select">
                            <label for="stocks-input-select">
                                <input type="text" name="stocks" id="stocks-input" class="small-input default subtitle">
                            </label>
                        </div>
                    </div>
                </div>

                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Available Delivery Dates</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    <div class="product-form-dates">
                        <div class="radio-select-row">
                            <input type="radio" name="open-days" id="open-days">
                            <label for="open-days" class="radio-label subtitle">
                                At least 
                                {{ form.days }}
                                open day(s) after order is made
                            </label> 
                        </div>
                    </div>
                    <div class="product-form-dates">
                        <div class="radio-select-row">
                            <input type="radio" name="weekly-deliveries" id="weekly-deliveries">
                            <label for="weekly-deliveries" class="radio-label subtitle" id="weekly-deliveries-input">
                                Weekly batch deliveries on {{ form.week }}
                            </label> 
                        </div>
                    </div>
                </div>

                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Maximum Orders Taken / Day</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    <div class="product-form-stocks">
                        <div class="radio-select-row">
                            <input type="radio" name="no-order-limits" id="no-order-limits" checked> 
                            <label for="no-order-limits" class="radio-label subtitle">No Limit</label>
                        </div>
                        <div class="radio-select-row">
                            <input type="radio" name="orders-input-select" id="orders-input-select">
                            <label for="orders-input-select">
                                {{ form.orders }}
                            </label>
                        </div>
                    </div>
                </div>

                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Possible Add-Ons</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    {{ addonFormset.management_form }}

                    <!-- The form-TOTAL_FORMS input contains the value of the total number of forms being submitted. If it doesn't match the actual number of forms Django receives when the forms are submitted, an error will be raised. -->
                    <input type="hidden" name="addonForm-TOTAL_FORMS" value="1" id="addonForm-TOTAL_SIZES">
                    <input type="hidden" name="addonForm-MIN_NUM_FORMS" value="1" id="addonForm-MIN_NUM_SIZES">
                    <input type="hidden" name="addonForm-MAX_NUM_FORMS" value="10" id="addonForm-MAX_NUM_SIZES">

                    {% for addon in addonFormset %}
                    <div class="product-form-formset addon-formset">
                        {{ addon }}
                        <button type="button" name="id_addon-set-0-remove" id="id_addon-set-0-remove" class="tertiary-btn tertiary-btn-link delete-addon-form">Remove</button>
                    </div>
                    {% endfor %}
                    <button type="button" id="add-addon" class="tertiary-btn tertiary-btn-link bold">Add Option</button>
                </div>

                <div class="product-form-content">
                    <div class="product-form-label">
                        <p>Any special instructions, allergens, etc.?</p><span style="color: var(--failure-main);">*</span>
                    </div>
                    {{ form.instructions }}
                </div>
                
            </div>
        </div>
    </main>
    </form>

    <script src="{% static '/js/addproducts.js' %}"></script>
</body>
</html>