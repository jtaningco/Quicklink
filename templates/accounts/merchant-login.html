{% extends 'quicklink/signups.html' %}
{% load static %}
{% load socialaccount %}

{% block pagetitle %}Merchant Login{% endblock %}

{% block stylesheets %} 
    <!-- NOTY Notification Stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.css" integrity="sha512-NXUhxhkDgZYOMjaIgd89zF2w51Mub53Ru3zCNp5LTlEzMbNNAjTjDbpURYGS5Mop2cU4b7re1nOIucsVlrx9fA==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.css" integrity="sha512-0p3K0H3S6Q4bEWZ/WmC94Tgit2ular2/n0ESdfEX8l172YyQj8re1Wu9s/HT9T/T2osUw5Gx/6pAZNk3UKbESw==" crossorigin="anonymous">
{% endblock %}

{% block cardContent %}
    <div class="registration-header">
        <img 
            src="https://ik.imagekit.io/ripzjge77zz/Quicklink_App/logos/Shortened-logo_BzQkxRgQX.svg" 
            alt="Quicklink Logo" 
            srcset="
                https://ik.imagekit.io/ripzjge77zz/Quicklink_App/logos/shortened/Shortened-4x_qiZytmz_G.png 4x,
                https://ik.imagekit.io/ripzjge77zz/Quicklink_App/logos/shortened/Shortened-3x_qwYOTUuxmZn.png 3x,
                https://ik.imagekit.io/ripzjge77zz/Quicklink_App/logos/shortened/Shortened-2x_KY3DONXuR.png 2x,
                https://ik.imagekit.io/ripzjge77zz/Quicklink_App/logos/shortened/Shortened-logo_BzQkxRgQX.svg 1x,"
            style="padding-bottom: 0.75rem;"
        >
        <h1 class="bold" style="color: var(--primary-main); padding: 0.25rem 0; ">Welcome to Quicklink!</h1>
        <h2 class="body" style="color: var(--muted-default);">Log into your Quicklink account below.</h2>
    </div>
    <form action="" method="post" class="registration-form">
        {% csrf_token %}
        <div class="registration-content">
            <p class="subtitle bold">Email</p>
            <input type="text" name="email" class="input default" placeholder="Email">
        </div>

        <div class="registration-content">
            <p class="subtitle bold">Password</p>
            <input type="password" name="password" class="input default" placeholder="Password">
        </div>

        <button type="submit" style="margin: 24px 0; width: 100%;" id="js-login-btn" class="primary-btn primary-btn-link disabled sign-up-btn">Login</button>

        {% for message in messages %}
            <div class="form-errors">{{ message }}</div>
        {% endfor %}

        <div class="registration-content" style="flex-direction: row; align-items: center;">
            <p class="subtitle">Don't have an account?</p>
            <a class="registration-content__link subtitle" href="{% url 'accounts:register' %}">Sign up here</a>
        </div>
    </form>
    <div class="registration-footer">
        <div class="registration-footer--or-wrapper">
            <div class="line"></div>
            <p class="registration-footer--or overline">or</p>
            <div class="line"></div>
        </div>
        <div class="registration-footer--google-wrapper">
            <a href="{% provider_login_url 'google' %}" style="text-decoration: none;">
                <div class="google-btn" style="margin-top: 2.5rem;">
                    <img src="https://ik.imagekit.io/ripzjge77zz/Quicklink_App/logos/google/google-logo-9808_1_3YDBfzZoyaXR.svg" 
                    alt="Google Icon" style="width: 24px; height: 24px;">
                    <p class="google-btn-link subtitle bold">Sign in with Google</p>
                </div>
            </a>
        </div>
    </div>
{% endblock %}

{% block scriptsBody %}
    <!-- NOTY Notifications -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js" integrity="sha512-lOrm9FgT1LKOJRUXF3tp6QaMorJftUjowOWiDcG5GFZ/q7ukof19V0HKx/GWzXCdt9zYju3/KhBNdCLzK8b90Q==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.js" integrity="sha512-mgZL3SZ/vIooDg2mU2amX6NysMlthFl/jDbscSRgF/k3zmICLe6muAs7YbITZ+61FeUoo1plofYAocoR5Sa1rQ==" crossorigin="anonymous"></script>

    <script>
        $(".input").on("keyup", function () {    	
            canChangeColor();
        });
        
        function canChangeColor(){          
            var can = true;

            $(".input").each(function(){
                if($(this).val()==''){
                    can = false;
                }
            });
            
            if (can) {
                $('#js-login-btn').toggleClass('disabled', false)
            } else {
                $('#js-login-btn').toggleClass('disabled', true)
            }
        }
    </script>

    <!-- NOTY -->
    <script>
        var errors = $('.form-errors');
        var errorsList = [];
        
        if (errors.length > 0) {
            new Noty({
                type: 'error',
                theme: 'bootstrap-v4',
                text: 'Your email or password is incorrect.',
                layout: "topRight",
                timeout: 3000,
                progressBar: true,
            }).show();
        }
    </script>
{% endblock %}